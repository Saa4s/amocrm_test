Задание:

Необходимо написать скрипт, который позволит определенные логи событий из срм системы "amo crm" загружать в таблицу, а
именно в динамические ячейки гугл таблиц.


Решение:

0. Для того что бы получить данные аккаунта системы amo crm через API, для начала нужно получить токен авторизации
аккаунта.
Для этого на нужном аккаунте системы amo crm нужно создать интеграцию, которая позволит получить нужные для запроса
токена данные, такие как: "client_id" (id интеграции), "client_secret" (секрет интеграции), "grant_type"
("authorization_code"), "code" (код авторизации), "redirect_uri" (uri нужных логов события).
После получения данных, их нужно подставить в файл data_authorization.json (с помощью файла "make_jsondata.py")

1. Выполняем функцию main в файле "amocrm_test.py".

2. С помощью функции get_token мы получаем токен от amo crm. Далее токен загружается в файл token.json.

3. Следующей выполняется функция log_events. В ней мы с помощью токенов получаем данные логов ивентов аккаунта
и загружаем их в "events.json".

4. С помощью функции parse_events мы парсим данные. Убираем данные о страницах и uri запросе. Оставляем сами ивенты
логов, с их временем и данными. Переводим их в json формат, а после в csv файл "log_events.csv".

5. Подключаемся к API Google Sheets, Google Drive API. Получаем токен в виде json файла.
(Пример токен файла: "g_token.json")

6.1 С помощью функции upload_events_to_csv мы можем загрузить csv файл в google таблицу (Даем на вход функции токен
файл Google Drive API).
6.2 С помощью функции upload_events_by_cells мы можем загрузить данные логов в следующую свободную ячейку таблицы (Даем
на вход функции токен файл Google Drive API).




